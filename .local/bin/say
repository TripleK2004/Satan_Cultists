#!/bin/sh

logout(){
dmenu="$(printf ":b 鈴 Sleep\n:b  Shutdown\n:b  Logout\n:b ﰇ Restart " \
	| dmenu -c -p "RUN " -l 7 -fn "JetBrainsMono Nerd Font:size=13" -bw 3)"

case $dmenu in
    ":b  Logout" ) xsetroot -name fsignal:2 ;;
    ":b  Shutdown" ) systemctl poweroff ;;
    ":b 鈴 Sleep" ) systemctl suspend ;;
    ":b ﰇ Restart " ) systemctl reboot
esac
}

refstbg(){
    [ ! -e ~/.cache/st_layer.ff ] && \
      ff-blank 1920 1080 5376 5888 7168 59000 > ~/.cache/st_layer.ff
    ff-composite < ~/.cache/st_bg.ff ~/.cache/st_layer.ff 0,0,2 > ~/.cache/st_wallpaper.ff
}

_tmux(){
tmux ls > /dev/null
if [ $? = 1 ]; then
printf "Starting TMUX session\n" && \
    tmux new -s TMUX -d && \
    tmux rename-window -t TMUX:1 ' terminal' && \
    tmux new-window -t TMUX && \
    tmux rename-window -t TMUX:2 ' file_manager' && \
    tmux new-window -t TMUX && \
    tmux rename-window -t TMUX:3 ' text_editor' && \
    tmux send-keys -t TMUX:2 'while true; do; ranger && clear; done' C-m && \
    tmux send-keys -t TMUX:3 'cd ~/.git-repos/satan_cultists && while true; do; nvim; done' C-m && \
    tmux select-window -t 1
else
    printf "TMUX is already running\n"
fi
}

case $1 in
    logout ) logout ;;
    refstbg ) refstbg ;;
    tmux ) _tmux ;;
esac
